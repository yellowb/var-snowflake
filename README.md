# var-snowflake
瘦身的雪花算法

### 简介
生成的64bit整数, 组成部分由高位到低位如下:

1. 11bit - 填充0
2. 8bit  - 随机数
3. 29bit - 时间戳, 单位秒, 表示从基线时间开始的秒数, 能支持17年
4. 6bit  - node编号, 最大支持64个实例
5. 10bit - seq序号, 最大支持同一秒内生成1k个ID

按照这个配置, 每秒最大ID生成数 = 64(节点) * 1k = 64K个.

由于保证了至少高11bit都为0, 所以生成的base64字符串最大长度为8. Log64(2 ^ 54 - 1) = Log64(18014398509481983) < 9

### 使用方法:
见`var_snowflake_test.go`文件。

### 测试结果:
以下测试结果都以2020年1月1日0时0分0秒作为基线时间
#### 1.电脑时间为2020年12月21日
    === RUN   TestNode_Generate
    wnb6_kJKP = 110101101001010100011000111011110001110000010000000000 = 15099894834856960
    tlb6_kJKl = 110110000001010100011000111011110001110000010000000001 = 15205447951123457
    Opb6_kJK1 = 111100010001010100011000111011110001110000010000000010 = 16964666555565058
    Nzb6_kJKi = 111111100001010100011000111011110001110000010000000011 = 17879460229874691
    ckb6_kJK3 = 100101110001010100011000111011110001110000010000000100 = 10631479579575300
    -----------------
    hLb6_qPKP = 100100111001010100011000111011110010000000010000000000 = 10385188975019008
    OXb6_qPKl = 111100001001010100011000111011110010000000010000000001 = 16929482183541761
    rFb6_qPK1 = 101101011001010100011000111011110010000000010000000010 = 12777726277059586
    5Lb6_qPKi = 101011111001010100011000111011110010000000010000000011 = 12355513811993603
    4kb6_qPK3 = 101100110001010100011000111011110010000000010000000100 = 12601804416615428
    -----------------
    NFb6_qKKP = 111111011001010100011000111011110010010000010000000000 = 17844275857916928
    _lb6_qKKl = 111011000001010100011000111011110010010000010000000001 = 16612822834807809
    LXb6_qKK1 = 111001001001010100011000111011110010010000010000000010 = 16085057253475330
    cFb6_qKKi = 100101011001010100011000111011110010010000010000000011 = 10525926463439875
    Wzb6_qKK3 = 111110100001010100011000111011110010010000010000000100 = 17597985253295108
    -----------------
    --- PASS: TestNode_Generate (3.00s)

#### 2.把电脑时钟调到2035年12月21日
    === RUN   TestNode_Generate
    wDn8c5JKP = 110101101110101001100000100101101011110000010000000000 = 15123336395686912
    t9n8c5JKl = 110110000110101001100000100101101011110000010000000001 = 15228889511953409
    OEn8c5JK1 = 111100010110101001100000100101101011110000010000000010 = 16988108116395010
    Ndn8c5JKi = 111111100110101001100000100101101011110000010000000011 = 17902901790704643
    ctn8c5JK3 = 100101110110101001100000100101101011110000010000000100 = 10654921140405252
    -----------------
    hWn8c4PKP = 100100111110101001100000100101101100000000010000000000 = 10408630535848960
    OBn8c4PKl = 111100001110101001100000100101101100000000010000000001 = 16952923744371713
    r7n8c4PK1 = 101101011110101001100000100101101100000000010000000010 = 12801167837889538
    5Wn8c4PKi = 101011111110101001100000100101101100000000010000000011 = 12378955372823555
    4tn8c4PK3 = 101100110110101001100000100101101100000000010000000100 = 12625245977445380
    -----------------
    N7n8c4KKP = 111111011110101001100000100101101100010000010000000000 = 17867717418746880
    _9n8c4KKl = 111011000110101001100000100101101100010000010000000001 = 16636264395637761
    LBn8c4KK1 = 111001001110101001100000100101101100010000010000000010 = 16108498814305282
    c7n8c4KKi = 100101011110101001100000100101101100010000010000000011 = 10549368024269827
    Wdn8c4KK3 = 111110100110101001100000100101101100010000010000000100 = 17621426814125060
    -----------------
    --- PASS: TestNode_Generate (3.02s)
